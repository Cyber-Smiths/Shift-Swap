<!DOCTYPE html>
<html>
<head>
    
    <title>Cyber Swap</title>
    
    <meta charset='utf-8' />
    
    <link href="fullcalendar.css" rel="stylesheet" />
    <link href="fullcalendar.print.css" rel="stylesheet" media="print" />
    <link href="paylocity-citrus/dist/Content/citrus.core.css" rel="stylesheet" />
    <link href="paylocity-citrus/scheduler-152/Content/styles.css" rel="stylesheet" />
    <script src="fullcalendar-2.3.2/lib/jquery.min.js"></script>
    <script src="fullcalendar-2.3.2/lib/moment.min.js"></script>
    <script src="fullcalendar-2.3.2/fullcalendar.js"></script>
    <script type='text/javascript'></script>
    
    
    <script>
        $(document).ready(function() {
            $('#calendar').fullCalendar({
                header: {
                    left: 'prev,next today',
                    center: 'title',
                    right: ''
                },
                defaultView: "month",
                editable: false,
                allDaySlot: false,
                eventClick: function (calEvent, jsEvent, view) {
                    $('#myModalPrompt').modal('toggle');
                    document.getElementById("confirmGive").addEventListener("click", giveShift, true);
                    function giveShift() {
                        $.ajax
                            ({
                                type: 'POST',
                                url: 'http://helloworld-db.azurewebsites.net/ASPX/giveShift.aspx',
                                data: 
                                {
                                    ShiftId: (calEvent.id)
                                },
                                success: function() {
                                    $('#calendar').fullCalendar('refetchEvents');
                                }
                            });
                        document.getElementById("confirmGive").removeEventListener("click", giveShift, true);
                    }
                 },
                eventLimit: true, // allow "more" link when too many events
                eventSources: [
                    {
                        url: 'http://helloworld-db.azurewebsites.net/ASPX/CyberGeeksws.aspx/?boogers=1',
                        color: "#4bb1e6",
                        textColor: "white"
                    },
                    {
                        url: 'http://helloworld-db.azurewebsites.net/ASPX/myAvailableShifts.aspx/?boogers=1',
                        color: "#4bb1e6",
                        borderColor: "#ff5511",
                        textColor: "#ff5511"
                    }
                 ]
                        
            });
            
        });
    </script>

  

    <style>
        body {
            margin: 40px 10px;
            padding: 0;
            font-family: "Lucida Grande",Helvetica,Arial,Verdana,sans-serif;
            font-size: 14px;
        }

        #calendar {
            max-width: 900px;
            margin: 0 auto;
        }
   </style>
        
</head>
    
<body class="citrus">
    
        <div id="calendar"></div>
    
    <form method="get" action="/shiftboard.html">
        <button class="button" type="submit">Shift Board</button>
    </form>

    <form method="get" action="/index.html">
        <button class="button" type="submit">Log Out</button>
    </form>
       
        

                       
       <div id="myModalPrompt" class="modal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
           <div class="modal-dialog">
               <div class="modal-content size-small">
                   <div class="modal-header">
                       <h2>Give Away Shift?</h2>
                       <button type="button" class="close" data-dismiss="modal" aria-hidden="true"><i class="icon-delete size-medium"></i></button>
                   </div>
                   <div class="modal-body">
                       <p>
                           This shift will be added to the Shift Board.
                       </p>
                   </div>
                   <div class="modal-footer">
                       <button id="confirmGive" type="button" class="button" data-dismiss="modal">Give Away</button>
                       <button type="button" class="button secondary outline" data-dismiss="modal">Cancel</button>
                   </div>
               </div>
           </div>
       </div>

    


     <!--Citrus Javascript-->      
    <script src="paylocity-citrus/dist/Scripts/citrus.modal.js"></script>
    <script src="paylocity-citrus/dist/Scripts/citrus.functions.js"></script>
    <script src="paylocity-citrus/dist/Scripts/libs/modernizr.js"></script>

</body>

</html>